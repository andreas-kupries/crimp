# -*- tcl -*-
# -------------------------------------------------------------------------

source [file join \
            [file dirname [file join [pwd] [info script]]] \
            testutilities.tcl]

testsNeedTcl     8.5
testsNeedTcltest 2

support { useLocalFile synth.tcl }
support { useC [mainPath _test/lib]/crimp_core* crimp::core no }
testing { useC [mainPath _test/lib]/crimp*      crimp       no }

# -------------------------------------------------------------------------
## Geometry manipulation. Expand image in vacccccrious ways.
## TODO (implementation): fpcomplex.
# -------------------------------------------------------------------------

test crimp-expand-1.0 {image expand, wrong\#args, not enough} -body {
    crimp expand
} -returnCodes error -result {wrong # args: should be "crimp expand bordertype image ww hn we hs ..."}

test crimp-expand-1.1 {image expand, wrong\#args, not enough} -body {
    crimp expand BORDER
} -returnCodes error -result {wrong # args: should be "crimp expand bordertype image ww hn we hs ..."}

test crimp-expand-1.2 {image expand, wrong\#args, not enough} -body {
    crimp expand BORDER IMAGE
} -returnCodes error -result {wrong # args: should be "crimp expand bordertype image ww hn we hs ..."}

test crimp-expand-1.3 {image expand, wrong\#args, not enough} -body {
    crimp expand BORDER IMAGE W
} -returnCodes error -result {wrong # args: should be "crimp expand bordertype image ww hn we hs ..."}

test crimp-expand-1.4 {image expand, wrong\#args, not enough} -body {
    crimp expand BORDER IMAGE W N
} -returnCodes error -result {wrong # args: should be "crimp expand bordertype image ww hn we hs ..."}

test crimp-expand-1.5 {image expand, wrong\#args, not enough} -body {
    crimp expand BORDER IMAGE W N E
} -returnCodes error -result {wrong # args: should be "crimp expand bordertype image ww hn we hs ..."}


test crimp-expand-1.6 {image expand, invalid args} -body {
    crimp expand BORDERTYPE IMAGE WW HN WE HS
} -returnCodes error -result {invalid image format}

set n 0
foreach itype [types] {
    test crimp-expand-1.7.$n "[origin] image expand, $itype, invalid border" -body {
        crimp expand BORDERTYPE [$itype] WW HN WE HS
    } -returnCodes error -result {Unknown border type "BORDERTYPE", expected one of const, extend, mirror, replicate, or wrap} \
        -constraints [expr {$itype eq "fpcomplex"
                            ? "NotYetImplemented"
                            : "" }]
    incr n
}

set n 0
foreach itype [types] {
    if {$itype eq "fpcomplex"} continue

    foreach border {extend mirror replicate wrap} {
        test crimp-expand-1.8.$n "[origin] image expand $border, $itype, wrong\#args, too many" -body {
            crimp expand $border [$itype] W N E S toomuch
        } -returnCodes error -result "wrong\#args: no values accepted by \"$border\" borders"

        test crimp-expand-1.9.$n "[origin] image expand $border, $itype, invalid args" -body {
            crimp expand $border [$itype] W N E S
        } -returnCodes error -result {expected integer but got "W"}

        test crimp-expand-1.10.$n "[origin] image expand $border, $itype, invalid args" -body {
            crimp expand $border [$itype] 3 N E S
        } -returnCodes error -result {expected integer but got "N"}

        test crimp-expand-1.11.$n "[origin] image expand $border, $itype, invalid args" -body {
            crimp expand $border [$itype] 3 4 E S
        } -returnCodes error -result {expected integer but got "E"}

        test crimp-expand-1.12.$n "[origin] image expand $border, $itype, invalid args" -body {
            crimp expand $border [$itype] -3 4 5 6
        } -returnCodes error -result {bad image border size, expected non-negative values}

        test crimp-expand-1.13.$n "[origin] image expand $border, $itype, invalid args" -body {
            crimp expand $border [$itype] 3 -4 5 6
        } -returnCodes error -result {bad image border size, expected non-negative values}

        test crimp-expand-1.14.$n "[origin] image expand $border, $itype, invalid args" -body {
            crimp expand $border [$itype] 3 4 -5 6
        } -returnCodes error -result {bad image border size, expected non-negative values}

        test crimp-expand-1.15.$n "[origin] image expand $border, $itype, invalid args" -body {
            crimp expand $border [$itype] 3 4 5 -6
        } -returnCodes error -result {bad image border size, expected non-negative values}
    }
    incr n
}
# TODO : expand const - defaults for missing values. auto-ignore too many.

# -------------------------------------------------------------------------
# Test images are (0,0,5,5)
# Cases:
# - const, extend, mirror, replicate, or wrap
#   - grey8, grey16, grey32, rgb, rgba, hsv, float, fpcomplex
#   - 0, 1, 6 (larger than image dimension)
#   - north, south, east, west (can be done separately)
#   - handling of defaults, missing values, too many values
# => 4*4*7*5 ~ 560
# -------------------------------------------------------------------------

test crimp-expand-2.0 "[origin] image expand, const, grey8" -body {
    astcl [crimp expand const [grey8] 0 0 0 0]
} -result [list crimp::image::grey8 0 0 5 5 {} [trim {
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
}]]

test crimp-expand-2.1 "[origin] image expand, const, grey8" -body {
    astcl [crimp expand const [grey8] 1 0 0 0]
} -result [list crimp::image::grey8 -1 0 6 5 {} [trim {
    0  0  1  2  3  4
    0  5  6  7  8  9
    0 10 11 12 13 14
    0 15 16 17 18 19
    0 20 21 22 23 24
}]]

test crimp-expand-2.2 "[origin] image expand, const, grey8" -body {
    astcl [crimp expand const [grey8] 0 1 0 0]
} -result [list crimp::image::grey8 0 -1 5 6 {} [trim {
     0  0  0  0  0
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
}]]

test crimp-expand-2.3 "[origin] image expand, const, grey8" -body {
    astcl [crimp expand const [grey8] 0 0 1 0]
} -result [list crimp::image::grey8 0 0 6 5 {} [trim {
     0  1  2  3  4 0
     5  6  7  8  9 0
    10 11 12 13 14 0
    15 16 17 18 19 0
    20 21 22 23 24 0
}]]

test crimp-expand-2.4 "[origin] image expand, const, grey8" -body {
    astcl [crimp expand const [grey8] 0 0 0 1]
} -result [list crimp::image::grey8 0 0 5 6 {} [trim {
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
     0  0  0  0  0
}]]

test crimp-expand-2.5 "[origin] image expand, wrap, grey8" -body {
    astcl [crimp expand wrap [grey8] 1 0 0 0]
} -result [list crimp::image::grey8 -1 0 6 5 {} [trim {
     4  0  1  2  3  4
     9  5  6  7  8  9
    14 10 11 12 13 14
    19 15 16 17 18 19
    24 20 21 22 23 24
}]]

test crimp-expand-2.6 "[origin] image expand, wrap, grey8" -body {
    astcl [crimp expand wrap [grey8] 0 1 0 0]
} -result [list crimp::image::grey8 0 -1 5 6 {} [trim {
    20 21 22 23 24
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
}]]

test crimp-expand-2.7 "[origin] image expand, wrap, grey8" -body {
    astcl [crimp expand wrap [grey8] 0 0 1 0]
} -result [list crimp::image::grey8 0 0 6 5 {} [trim {
     0  1  2  3  4  0
     5  6  7  8  9  5
    10 11 12 13 14 10
    15 16 17 18 19 15
    20 21 22 23 24 20
}]]

test crimp-expand-2.8 "[origin] image expand, wrap, grey8" -body {
    astcl [crimp expand wrap [grey8] 0 0 0 1]
} -result [list crimp::image::grey8 0 0 5 6 {} [trim {
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
     0  1  2  3  4
}]]

test crimp-expand-2.9 "[origin] image expand, replicate, grey8" -body {
    astcl [crimp expand replicate [grey8] 2 0 0 0]
} -result [list crimp::image::grey8 -2 0 7 5 {} [trim {
     0  0  0  1  2  3  4
     5  5  5  6  7  8  9
    10 10 10 11 12 13 14
    15 15 15 16 17 18 19
    20 20 20 21 22 23 24
}]]

test crimp-expand-2.10 "[origin] image expand, replicate, grey8" -body {
    astcl [crimp expand replicate [grey8] 0 2 0 0]
} -result [list crimp::image::grey8 0 -2 5 7 {} [trim {
     0  1  2  3  4
     0  1  2  3  4
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
}]]

test crimp-expand-2.11 "[origin] image expand, replicate, grey8" -body {
    astcl [crimp expand replicate [grey8] 0 0 2 0]
} -result [list crimp::image::grey8 0 0 7 5 {} [trim {
     0  1  2  3  4  4  4
     5  6  7  8  9  9  9
    10 11 12 13 14 14 14
    15 16 17 18 19 19 19
    20 21 22 23 24 24 24
}]]

test crimp-expand-2.12 "[origin] image expand, replicate, grey8" -body {
    astcl [crimp expand replicate [grey8] 0 0 0 2]
} -result [list crimp::image::grey8 0 0 5 7 {} [trim {
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
    20 21 22 23 24
    20 21 22 23 24
}]]

test crimp-expand-2.13 "[origin] image expand, mirror, grey8" -body {
    astcl [crimp expand mirror [grey8] 2 0 0 0]
} -result [list crimp::image::grey8 -2 0 7 5 {} [trim {
      2  1  0  1  2  3  4
      7  6  5  6  7  8  9
    12 11 10 11 12 13 14
    17 16 15 16 17 18 19
    22 21 20 21 22 23 24
}]]

test crimp-expand-2.14 "[origin] image expand, mirror, grey8" -body {
    astcl [crimp expand mirror [grey8] 0 2 0 0]
} -result [list crimp::image::grey8 0 -2 5 7 {} [trim {
    10 11 12 13 14
     5  6  7  8  9
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
}]]

test crimp-expand-2.15 "[origin] image expand, mirror, grey8" -body {
    astcl [crimp expand mirror [grey8] 0 0 2 0]
} -result [list crimp::image::grey8 0 0 7 5 {} [trim {
     0  1  2  3  4  3  2
     5  6  7  8  9  8  7
    10 11 12 13 14 13 12
    15 16 17 18 19 18 17
    20 21 22 23 24 23 22
}]]

test crimp-expand-2.16 "[origin] image expand, mirror, grey8" -body {
    astcl [crimp expand mirror [grey8] 0 0 0 2]
} -result [list crimp::image::grey8 0 0 5 7 {} [trim {
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
    15 16 17 18 19
    10 11 12 13 14
}]]

test crimp-expand-2.17 "[origin] image expand, extend, grey8" -body {
    astcl [crimp expand extend [grey8] 2 0 0 0]
} -result [list crimp::image::grey8 -2 0 7 5 {} [trim {
     2 1  0  1  2  3  4
     2 1  5  6  7  8  9
     2 1 10 11 12 13 14
     2 1 15 16 17 18 19
     2 1 20 21 22 23 24
}]]

test crimp-expand-2.18 "[origin] image expand, extend, grey8" -body {
    astcl [crimp expand extend [grey8] 0 2 0 0]
} -result [list crimp::image::grey8 0 -2 5 7 {} [trim {
    10 10 10 10 10
     5  5  5  5  5
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
}]]

test crimp-expand-2.19 "[origin] image expand, extend, grey8" -body {
    astcl [crimp expand extend [grey8] 0 0 2 0]
} -result [list crimp::image::grey8 0 0 7 5 {} [trim {
     0  1  2  3  4 0 0
     5  6  7  8  9 0 0
    10 11 12 13 14 0 0
    15 16 17 18 19 0 0
    20 21 22 23 24 0 0
}]]

test crimp-expand-2.20 "[origin] image expand, extend, grey8" -body {
    astcl [crimp expand extend [grey8] 0 0 0 2]
} -result [list crimp::image::grey8 0 0 5 7 {} [trim {
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
    0   0  0  0  0
    0   0  0  0  0
}]]


# -------------------------------------------------------------------------

test crimp-expand-3.0 "[origin] image expand, const, grey16" -body {
    astcl [crimp expand const [grey16] 0 0 0 0]
} -result [list crimp::image::grey16 0 0 5 5 {} [trim {
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
}]]

test crimp-expand-3.1 "[origin] image expand, const, grey16" -body {
    astcl [crimp expand const [grey16] 1 0 0 0]
} -result [list crimp::image::grey16 -1 0 6 5 {} [trim {
    0  0  1  2  3  4
    0  5  6  7  8  9
    0 10 11 12 13 14
    0 15 16 17 18 19
    0 20 21 22 23 24
}]]

test crimp-expand-3.2 "[origin] image expand, const, grey16" -body {
    astcl [crimp expand const [grey16] 0 1 0 0]
} -result [list crimp::image::grey16 0 -1 5 6 {} [trim {
     0  0  0  0  0
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
}]]

test crimp-expand-3.3 "[origin] image expand, const, grey16" -body {
    astcl [crimp expand const [grey16] 0 0 1 0]
} -result [list crimp::image::grey16 0 0 6 5 {} [trim {
     0  1  2  3  4 0
     5  6  7  8  9 0
    10 11 12 13 14 0
    15 16 17 18 19 0
    20 21 22 23 24 0
}]]

test crimp-expand-3.4 "[origin] image expand, const, grey16" -body {
    astcl [crimp expand const [grey16] 0 0 0 1]
} -result [list crimp::image::grey16 0 0 5 6 {} [trim {
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
     0  0  0  0  0
}]]

test crimp-expand-3.5 "[origin] image expand, wrap, grey16" -body {
    astcl [crimp expand wrap [grey16] 1 0 0 0]
} -result [list crimp::image::grey16 -1 0 6 5 {} [trim {
     4  0  1  2  3  4
     9  5  6  7  8  9
    14 10 11 12 13 14
    19 15 16 17 18 19
    24 20 21 22 23 24
}]]

test crimp-expand-3.6 "[origin] image expand, wrap, grey16" -body {
    astcl [crimp expand wrap [grey16] 0 1 0 0]
} -result [list crimp::image::grey16 0 -1 5 6 {} [trim {
    20 21 22 23 24
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
}]]

test crimp-expand-3.7 "[origin] image expand, wrap, grey16" -body {
    astcl [crimp expand wrap [grey16] 0 0 1 0]
} -result [list crimp::image::grey16 0 0 6 5 {} [trim {
     0  1  2  3  4  0
     5  6  7  8  9  5
    10 11 12 13 14 10
    15 16 17 18 19 15
    20 21 22 23 24 20
}]]

test crimp-expand-3.8 "[origin] image expand, wrap, grey16" -body {
    astcl [crimp expand wrap [grey16] 0 0 0 1]
} -result [list crimp::image::grey16 0 0 5 6 {} [trim {
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
     0  1  2  3  4
}]]

test crimp-expand-3.9 "[origin] image expand, replicate, grey16" -body {
    astcl [crimp expand replicate [grey16] 2 0 0 0]
} -result [list crimp::image::grey16 -2 0 7 5 {} [trim {
     0  0  0  1  2  3  4
     5  5  5  6  7  8  9
    10 10 10 11 12 13 14
    15 15 15 16 17 18 19
    20 20 20 21 22 23 24
}]]

test crimp-expand-3.10 "[origin] image expand, replicate, grey16" -body {
    astcl [crimp expand replicate [grey16] 0 2 0 0]
} -result [list crimp::image::grey16 0 -2 5 7 {} [trim {
     0  1  2  3  4
     0  1  2  3  4
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
}]]

test crimp-expand-3.11 "[origin] image expand, replicate, grey16" -body {
    astcl [crimp expand replicate [grey16] 0 0 2 0]
} -result [list crimp::image::grey16 0 0 7 5 {} [trim {
     0  1  2  3  4  4  4
     5  6  7  8  9  9  9
    10 11 12 13 14 14 14
    15 16 17 18 19 19 19
    20 21 22 23 24 24 24
}]]

test crimp-expand-3.12 "[origin] image expand, replicate, grey16" -body {
    astcl [crimp expand replicate [grey16] 0 0 0 2]
} -result [list crimp::image::grey16 0 0 5 7 {} [trim {
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
    20 21 22 23 24
    20 21 22 23 24
}]]

# -------------------------------------------------------------------------

test crimp-expand-4.0 "[origin] image expand, const, grey32" -body {
    astcl [crimp expand const [grey32] 0 0 0 0]
} -result [list crimp::image::grey32 0 0 5 5 {} [trim {
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
}]]

test crimp-expand-4.1 "[origin] image expand, const, grey32" -body {
    astcl [crimp expand const [grey32] 1 0 0 0]
} -result [list crimp::image::grey32 -1 0 6 5 {} [trim {
    0  0  1  2  3  4
    0  5  6  7  8  9
    0 10 11 12 13 14
    0 15 16 17 18 19
    0 20 21 22 23 24
}]]

test crimp-expand-4.2 "[origin] image expand, const, grey32" -body {
    astcl [crimp expand const [grey32] 0 1 0 0]
} -result [list crimp::image::grey32 0 -1 5 6 {} [trim {
     0  0  0  0  0
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
}]]

test crimp-expand-4.3 "[origin] image expand, const, grey32" -body {
    astcl [crimp expand const [grey32] 0 0 1 0]
} -result [list crimp::image::grey32 0 0 6 5 {} [trim {
     0  1  2  3  4 0
     5  6  7  8  9 0
    10 11 12 13 14 0
    15 16 17 18 19 0
    20 21 22 23 24 0
}]]

test crimp-expand-4.4 "[origin] image expand, const, grey32" -body {
    astcl [crimp expand const [grey32] 0 0 0 1]
} -result [list crimp::image::grey32 0 0 5 6 {} [trim {
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
     0  0  0  0  0
}]]

test crimp-expand-4.5 "[origin] image expand, wrap, grey32" -body {
    astcl [crimp expand wrap [grey32] 1 0 0 0]
} -result [list crimp::image::grey32 -1 0 6 5 {} [trim {
     4  0  1  2  3  4
     9  5  6  7  8  9
    14 10 11 12 13 14
    19 15 16 17 18 19
    24 20 21 22 23 24
}]]

test crimp-expand-4.6 "[origin] image expand, wrap, grey32" -body {
    astcl [crimp expand wrap [grey32] 0 1 0 0]
} -result [list crimp::image::grey32 0 -1 5 6 {} [trim {
    20 21 22 23 24
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
}]]

test crimp-expand-4.7 "[origin] image expand, wrap, grey32" -body {
    astcl [crimp expand wrap [grey32] 0 0 1 0]
} -result [list crimp::image::grey32 0 0 6 5 {} [trim {
     0  1  2  3  4  0
     5  6  7  8  9  5
    10 11 12 13 14 10
    15 16 17 18 19 15
    20 21 22 23 24 20
}]]

test crimp-expand-4.8 "[origin] image expand, wrap, grey32" -body {
    astcl [crimp expand wrap [grey32] 0 0 0 1]
} -result [list crimp::image::grey32 0 0 5 6 {} [trim {
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
     0  1  2  3  4
}]]

test crimp-expand-4.9 "[origin] image expand, replicate, grey32" -body {
    astcl [crimp expand replicate [grey32] 2 0 0 0]
} -result [list crimp::image::grey32 -2 0 7 5 {} [trim {
     0  0  0  1  2  3  4
     5  5  5  6  7  8  9
    10 10 10 11 12 13 14
    15 15 15 16 17 18 19
    20 20 20 21 22 23 24
}]]

test crimp-expand-4.10 "[origin] image expand, replicate, grey32" -body {
    astcl [crimp expand replicate [grey32] 0 2 0 0]
} -result [list crimp::image::grey32 0 -2 5 7 {} [trim {
     0  1  2  3  4
     0  1  2  3  4
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
}]]

test crimp-expand-4.11 "[origin] image expand, replicate, grey32" -body {
    astcl [crimp expand replicate [grey32] 0 0 2 0]
} -result [list crimp::image::grey32 0 0 7 5 {} [trim {
     0  1  2  3  4  4  4
     5  6  7  8  9  9  9
    10 11 12 13 14 14 14
    15 16 17 18 19 19 19
    20 21 22 23 24 24 24
}]]

test crimp-expand-4.12 "[origin] image expand, replicate, grey32" -body {
    astcl [crimp expand replicate [grey32] 0 0 0 2]
} -result [list crimp::image::grey32 0 0 5 7 {} [trim {
     0  1  2  3  4
     5  6  7  8  9
    10 11 12 13 14
    15 16 17 18 19
    20 21 22 23 24
    20 21 22 23 24
    20 21 22 23 24
}]]

# -------------------------------------------------------------------------

test crimp-expand-5.0 "[origin] image expand, const, rgb" -body {
    astcl [crimp expand const [rgb] 0 0 0 0]
} -result [list crimp::image::rgb 0 0 5 5 {} [trim {
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
    { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70}
    { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62}
    { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66}
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
}]]

test crimp-expand-5.1 "[origin] image expand, const, rgb" -body {
    astcl [crimp expand const [rgb] 1 0 0 0]
} -result [list crimp::image::rgb -1 0 6 5 {} [trim {
    {0 0 0} { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
    {0 0 0} { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70}
    {0 0 0} { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62}
    {0 0 0} { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66}
    {0 0 0} {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
}]]

test crimp-expand-5.2 "[origin] image expand, const, rgb" -body {
    astcl [crimp expand const [rgb] 0 1 0 0]
} -result [list crimp::image::rgb 0 -1 5 6 {} [trim {
    { 0  0  0} { 0  0  0} { 0  0  0} { 0  0  0} { 0  0  0}
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
    { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70}
    { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62}
    { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66}
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
}]]

test crimp-expand-5.3 "[origin] image expand, const, rgb" -body {
    astcl [crimp expand const [rgb] 0 0 1 0]
} -result [list crimp::image::rgb 0 0 6 5 {} [trim {
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74} {0 0 0}
    { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70} {0 0 0}
    { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62} {0 0 0}
    { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66} {0 0 0}
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72} {0 0 0}
}]]

test crimp-expand-5.4 "[origin] image expand, const, rgb" -body {
    astcl [crimp expand const [rgb] 0 0 0 1]
} -result [list crimp::image::rgb 0 0 5 6 {} [trim {
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
    { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70}
    { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62}
    { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66}
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
    { 0  0  0} { 0  0  0} { 0  0  0} { 0  0  0} { 0  0  0}
}]]

test crimp-expand-5.5 "[origin] image expand, wrap, rgb" -body {
    astcl [crimp expand wrap [rgb] 1 0 0 0]
} -result [list crimp::image::rgb -1 0 6 5 {} [trim {
    {60 69 74} { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
    {68 61 70} { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70}
    {73 67 62} { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62}
    {71 63 66} { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66}
    {64 65 72} {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
}]]

test crimp-expand-5.6 "[origin] image expand, wrap, rgb" -body {
    astcl [crimp expand wrap [rgb] 0 1 0 0]
} -result [list crimp::image::rgb 0 -1 5 6 {} [trim {
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
    { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70}
    { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62}
    { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66}
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
}]]

test crimp-expand-5.7 "[origin] image expand, wrap, rgb" -body {
    astcl [crimp expand wrap [rgb] 0 0 1 0]
} -result [list crimp::image::rgb 0 0 6 5 {} [trim {
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74} { 0  1  2}
    { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70} { 3  4  5}
    { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62} { 6  7  8}
    { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66} { 9 10 11}
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72} {12 13 14}
}]]

test crimp-expand-5.8 "[origin] image expand, wrap, rgb" -body {
    astcl [crimp expand wrap [rgb] 0 0 0 1]
} -result [list crimp::image::rgb 0 0 5 6 {} [trim {
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
    { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70}
    { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62}
    { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66}
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
}]]

# -------------------------------------------------------------------------

test crimp-expand-6.0 "[origin] image expand, const, rgba" -body {
    astcl [crimp expand const [rgba] 0 0 0 0]
} -result [list crimp::image::rgba 0 0 5 5 {} [trim {
    { 0  1  2 75} {15 20 25 84} {30 31 32 85} {57 58 59 86} {60 69 74 87}
    { 3  4  5 76} {16 21 26 83} {41 42 33 90} {56 55 54 89} {68 61 70 88}
    { 6  7  8 77} {17 22 27 82} {40 43 34 91} {51 52 53 98} {73 67 62 97}
    { 9 10 11 78} {18 23 28 81} {39 44 35 92} {50 49 48 99} {71 63 66 96}
    {12 13 14 79} {19 24 29 80} {38 37 36 93} {45 46 47 94} {64 65 72 95}
}]]

test crimp-expand-6.1 "[origin] image expand, const, rgba" -body {
    astcl [crimp expand const [rgba] 1 0 0 0]
} -result [list crimp::image::rgba -1 0 6 5 {} [trim {
    {0 0 0 255} { 0  1  2 75} {15 20 25 84} {30 31 32 85} {57 58 59 86} {60 69 74 87}
    {0 0 0 255} { 3  4  5 76} {16 21 26 83} {41 42 33 90} {56 55 54 89} {68 61 70 88}
    {0 0 0 255} { 6  7  8 77} {17 22 27 82} {40 43 34 91} {51 52 53 98} {73 67 62 97}
    {0 0 0 255} { 9 10 11 78} {18 23 28 81} {39 44 35 92} {50 49 48 99} {71 63 66 96}
    {0 0 0 255} {12 13 14 79} {19 24 29 80} {38 37 36 93} {45 46 47 94} {64 65 72 95}
}]]

test crimp-expand-6.2 "[origin] image expand, const, rgba" -body {
    astcl [crimp expand const [rgba] 0 1 0 0]
} -result [list crimp::image::rgba 0 -1 5 6 {} [trim {
    { 0  0  0 255} { 0  0  0 255} { 0  0  0 255} { 0  0  0 255} { 0  0  0 255}
    { 0  1  2  75} {15 20 25  84} {30 31 32  85} {57 58 59  86} {60 69 74  87}
    { 3  4  5  76} {16 21 26  83} {41 42 33  90} {56 55 54  89} {68 61 70  88}
    { 6  7  8  77} {17 22 27  82} {40 43 34  91} {51 52 53  98} {73 67 62  97}
    { 9 10 11  78} {18 23 28  81} {39 44 35  92} {50 49 48  99} {71 63 66  96}
    {12 13 14  79} {19 24 29  80} {38 37 36  93} {45 46 47  94} {64 65 72  95}
}]]

test crimp-expand-6.3 "[origin] image expand, const, rgba" -body {
    astcl [crimp expand const [rgba] 0 0 1 0]
} -result [list crimp::image::rgba 0 0 6 5 {} [trim {
    { 0  1  2 75} {15 20 25 84} {30 31 32 85} {57 58 59 86} {60 69 74 87} {0 0 0 255}
    { 3  4  5 76} {16 21 26 83} {41 42 33 90} {56 55 54 89} {68 61 70 88} {0 0 0 255}
    { 6  7  8 77} {17 22 27 82} {40 43 34 91} {51 52 53 98} {73 67 62 97} {0 0 0 255}
    { 9 10 11 78} {18 23 28 81} {39 44 35 92} {50 49 48 99} {71 63 66 96} {0 0 0 255}
    {12 13 14 79} {19 24 29 80} {38 37 36 93} {45 46 47 94} {64 65 72 95} {0 0 0 255}
}]]

test crimp-expand-6.4 "[origin] image expand, const, rgba" -body {
    astcl [crimp expand const [rgba] 0 0 0 1]
} -result [list crimp::image::rgba 0 0 5 6 {} [trim {
    { 0  1  2  75} {15 20 25  84} {30 31 32  85} {57 58 59  86} {60 69 74  87}
    { 3  4  5  76} {16 21 26  83} {41 42 33  90} {56 55 54  89} {68 61 70  88}
    { 6  7  8  77} {17 22 27  82} {40 43 34  91} {51 52 53  98} {73 67 62  97}
    { 9 10 11  78} {18 23 28  81} {39 44 35  92} {50 49 48  99} {71 63 66  96}
    {12 13 14  79} {19 24 29  80} {38 37 36  93} {45 46 47  94} {64 65 72  95}
    { 0  0  0 255} { 0  0  0 255} { 0  0  0 255} { 0  0  0 255} { 0  0  0 255}
}]]

test crimp-expand-6.5 "[origin] image expand, wrap, rgba" -body {
    astcl [crimp expand wrap [rgba] 1 0 0 0]
} -result [list crimp::image::rgba -1 0 6 5 {} [trim {
    {60 69 74 87} { 0  1  2 75} {15 20 25 84} {30 31 32 85} {57 58 59 86} {60 69 74 87}
    {68 61 70 88} { 3  4  5 76} {16 21 26 83} {41 42 33 90} {56 55 54 89} {68 61 70 88}
    {73 67 62 97} { 6  7  8 77} {17 22 27 82} {40 43 34 91} {51 52 53 98} {73 67 62 97}
    {71 63 66 96} { 9 10 11 78} {18 23 28 81} {39 44 35 92} {50 49 48 99} {71 63 66 96}
    {64 65 72 95} {12 13 14 79} {19 24 29 80} {38 37 36 93} {45 46 47 94} {64 65 72 95}
}]]

test crimp-expand-6.6 "[origin] image expand, wrap, rgba" -body {
    astcl [crimp expand wrap [rgba] 0 1 0 0]
} -result [list crimp::image::rgba 0 -1 5 6 {} [trim {
    {12 13 14  79} {19 24 29  80} {38 37 36  93} {45 46 47  94} {64 65 72  95}
    { 0  1  2  75} {15 20 25  84} {30 31 32  85} {57 58 59  86} {60 69 74  87}
    { 3  4  5  76} {16 21 26  83} {41 42 33  90} {56 55 54  89} {68 61 70  88}
    { 6  7  8  77} {17 22 27  82} {40 43 34  91} {51 52 53  98} {73 67 62  97}
    { 9 10 11  78} {18 23 28  81} {39 44 35  92} {50 49 48  99} {71 63 66  96}
    {12 13 14  79} {19 24 29  80} {38 37 36  93} {45 46 47  94} {64 65 72  95}
}]]

test crimp-expand-6.7 "[origin] image expand, wrap, rgba" -body {
    astcl [crimp expand wrap [rgba] 0 0 1 0]
} -result [list crimp::image::rgba 0 0 6 5 {} [trim {
    { 0  1  2 75} {15 20 25 84} {30 31 32 85} {57 58 59 86} {60 69 74 87} { 0  1  2 75}
    { 3  4  5 76} {16 21 26 83} {41 42 33 90} {56 55 54 89} {68 61 70 88} { 3  4  5 76}
    { 6  7  8 77} {17 22 27 82} {40 43 34 91} {51 52 53 98} {73 67 62 97} { 6  7  8 77}
    { 9 10 11 78} {18 23 28 81} {39 44 35 92} {50 49 48 99} {71 63 66 96} { 9 10 11 78}
    {12 13 14 79} {19 24 29 80} {38 37 36 93} {45 46 47 94} {64 65 72 95} {12 13 14 79}
}]]

test crimp-expand-6.8 "[origin] image expand, wrap, rgba" -body {
    astcl [crimp expand wrap [rgba] 0 0 0 1]
} -result [list crimp::image::rgba 0 0 5 6 {} [trim {
    { 0  1  2  75} {15 20 25  84} {30 31 32  85} {57 58 59  86} {60 69 74  87}
    { 3  4  5  76} {16 21 26  83} {41 42 33  90} {56 55 54  89} {68 61 70  88}
    { 6  7  8  77} {17 22 27  82} {40 43 34  91} {51 52 53  98} {73 67 62  97}
    { 9 10 11  78} {18 23 28  81} {39 44 35  92} {50 49 48  99} {71 63 66  96}
    {12 13 14  79} {19 24 29  80} {38 37 36  93} {45 46 47  94} {64 65 72  95}
    { 0  1  2  75} {15 20 25  84} {30 31 32  85} {57 58 59  86} {60 69 74  87}
}]]

# -------------------------------------------------------------------------

test crimp-expand-7.0 "[origin] image expand, const, hsv" -body {
    astcl [crimp expand const [hsv] 0 0 0 0]
} -result [list crimp::image::hsv 0 0 5 5 {} [trim {
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
    { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70}
    { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62}
    { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66}
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
}]]

test crimp-expand-7.1 "[origin] image expand, const, hsv" -body {
    astcl [crimp expand const [hsv] 1 0 0 0]
} -result [list crimp::image::hsv -1 0 6 5 {} [trim {
    {0 0 0} { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
    {0 0 0} { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70}
    {0 0 0} { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62}
    {0 0 0} { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66}
    {0 0 0} {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
}]]

test crimp-expand-7.2 "[origin] image expand, const, hsv" -body {
    astcl [crimp expand const [hsv] 0 1 0 0]
} -result [list crimp::image::hsv 0 -1 5 6 {} [trim {
    { 0  0  0} { 0  0  0} { 0  0  0} { 0  0  0} { 0  0  0}
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
    { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70}
    { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62}
    { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66}
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
}]]

test crimp-expand-7.3 "[origin] image expand, const, hsv" -body {
    astcl [crimp expand const [hsv] 0 0 1 0]
} -result [list crimp::image::hsv 0 0 6 5 {} [trim {
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74} {0 0 0}
    { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70} {0 0 0}
    { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62} {0 0 0}
    { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66} {0 0 0}
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72} {0 0 0}
}]]

test crimp-expand-7.4 "[origin] image expand, const, hsv" -body {
    astcl [crimp expand const [hsv] 0 0 0 1]
} -result [list crimp::image::hsv 0 0 5 6 {} [trim {
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
    { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70}
    { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62}
    { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66}
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
    { 0  0  0} { 0  0  0} { 0  0  0} { 0  0  0} { 0  0  0}
}]]

test crimp-expand-7.5 "[origin] image expand, wrap, hsv" -body {
    astcl [crimp expand wrap [hsv] 1 0 0 0]
} -result [list crimp::image::hsv -1 0 6 5 {} [trim {
    {60 69 74} { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
    {68 61 70} { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70}
    {73 67 62} { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62}
    {71 63 66} { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66}
    {64 65 72} {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
}]]

test crimp-expand-7.6 "[origin] image expand, wrap, hsv" -body {
    astcl [crimp expand wrap [hsv] 0 1 0 0]
} -result [list crimp::image::hsv 0 -1 5 6 {} [trim {
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
    { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70}
    { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62}
    { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66}
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
}]]

test crimp-expand-7.7 "[origin] image expand, wrap, hsv" -body {
    astcl [crimp expand wrap [hsv] 0 0 1 0]
} -result [list crimp::image::hsv 0 0 6 5 {} [trim {
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74} { 0  1  2}
    { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70} { 3  4  5}
    { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62} { 6  7  8}
    { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66} { 9 10 11}
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72} {12 13 14}
}]]

test crimp-expand-7.8 "[origin] image expand, wrap, hsv" -body {
    astcl [crimp expand wrap [hsv] 0 0 0 1]
} -result [list crimp::image::hsv 0 0 5 6 {} [trim {
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
    { 3  4  5} {16 21 26} {41 42 33} {56 55 54} {68 61 70}
    { 6  7  8} {17 22 27} {40 43 34} {51 52 53} {73 67 62}
    { 9 10 11} {18 23 28} {39 44 35} {50 49 48} {71 63 66}
    {12 13 14} {19 24 29} {38 37 36} {45 46 47} {64 65 72}
    { 0  1  2} {15 20 25} {30 31 32} {57 58 59} {60 69 74}
}]]

# -------------------------------------------------------------------------

test crimp-expand-8.0 "[origin] image expand, const, float" -body {
    astcl [crimp expand const [float] 0 0 0 0]
} -result [list crimp::image::float 0 0 5 5 {} [trim {
     0.0  1.0  2.0  3.0  4.0
     5.0  6.0  7.0  8.0  9.0
    10.0 11.0 12.0 13.0 14.0
    15.0 16.0 17.0 18.0 19.0
    20.0 21.0 22.0 23.0 24.0
}]]

test crimp-expand-8.1 "[origin] image expand, const, float" -body {
    astcl [crimp expand const [float] 1 0 0 0]
} -result [list crimp::image::float -1 0 6 5 {} [trim {
    0.0  0.0  1.0  2.0  3.0  4.0
    0.0  5.0  6.0  7.0  8.0  9.0
    0.0 10.0 11.0 12.0 13.0 14.0
    0.0 15.0 16.0 17.0 18.0 19.0
    0.0 20.0 21.0 22.0 23.0 24.0
}]]

test crimp-expand-8.2 "[origin] image expand, const, float" -body {
    astcl [crimp expand const [float] 0 1 0 0]
} -result [list crimp::image::float 0 -1 5 6 {} [trim {
     0.0  0.0  0.0  0.0  0.0
     0.0  1.0  2.0  3.0  4.0
     5.0  6.0  7.0  8.0  9.0
    10.0 11.0 12.0 13.0 14.0
    15.0 16.0 17.0 18.0 19.0
    20.0 21.0 22.0 23.0 24.0
}]]

test crimp-expand-8.3 "[origin] image expand, const, float" -body {
    astcl [crimp expand const [float] 0 0 1 0]
} -result [list crimp::image::float 0 0 6 5 {} [trim {
     0.0  1.0  2.0  3.0  4.0 0.0
     5.0  6.0  7.0  8.0  9.0 0.0
    10.0 11.0 12.0 13.0 14.0 0.0
    15.0 16.0 17.0 18.0 19.0 0.0
    20.0 21.0 22.0 23.0 24.0 0.0
}]]

test crimp-expand-8.4 "[origin] image expand, const, float" -body {
    astcl [crimp expand const [float] 0 0 0 1]
} -result [list crimp::image::float 0 0 5 6 {} [trim {
     0.0  1.0  2.0  3.0  4.0
     5.0  6.0  7.0  8.0  9.0
    10.0 11.0 12.0 13.0 14.0
    15.0 16.0 17.0 18.0 19.0
    20.0 21.0 22.0 23.0 24.0
     0.0  0.0  0.0  0.0  0.0
}]]

test crimp-expand-8.5 "[origin] image expand, wrap, float" -body {
    astcl [crimp expand wrap [float] 1 0 0 0]
} -result [list crimp::image::float -1 0 6 5 {} [trim {
     4.0  0.0  1.0  2.0  3.0  4.0
     9.0  5.0  6.0  7.0  8.0  9.0
    14.0 10.0 11.0 12.0 13.0 14.0
    19.0 15.0 16.0 17.0 18.0 19.0
    24.0 20.0 21.0 22.0 23.0 24.0
}]]

test crimp-expand-8.6 "[origin] image expand, wrap, float" -body {
    astcl [crimp expand wrap [float] 0 1 0 0]
} -result [list crimp::image::float 0 -1 5 6 {} [trim {
    20.0 21.0 22.0 23.0 24.0
     0.0  1.0  2.0  3.0  4.0
     5.0  6.0  7.0  8.0  9.0
    10.0 11.0 12.0 13.0 14.0
    15.0 16.0 17.0 18.0 19.0
    20.0 21.0 22.0 23.0 24.0
}]]

test crimp-expand-8.7 "[origin] image expand, wrap, float" -body {
    astcl [crimp expand wrap [float] 0 0 1 0]
} -result [list crimp::image::float 0 0 6 5 {} [trim {
     0.0  1.0  2.0  3.0  4.0  0.0
     5.0  6.0  7.0  8.0  9.0  5.0
    10.0 11.0 12.0 13.0 14.0 10.0
    15.0 16.0 17.0 18.0 19.0 15.0
    20.0 21.0 22.0 23.0 24.0 20.0
}]]

test crimp-expand-8.8 "[origin] image expand, wrap, float" -body {
    astcl [crimp expand wrap [float] 0 0 0 1]
} -result [list crimp::image::float 0 0 5 6 {} [trim {
     0.0  1.0  2.0  3.0  4.0
     5.0  6.0  7.0  8.0  9.0
    10.0 11.0 12.0 13.0 14.0
    15.0 16.0 17.0 18.0 19.0
    20.0 21.0 22.0 23.0 24.0
     0.0  1.0  2.0  3.0  4.0
}]]

# -------------------------------------------------------------------------
## Handling of input location: Modified pass through to result.

set n 0
foreach itype [types] {
    if {$itype eq "fpcomplex"} continue

    foreach border {const extend mirror replicate wrap} {
        test crimp-expand-X.$n "[origin] image expand, $border, $itype, location handling" -body {
            crimp at [crimp expand $border [crimp place [$itype] 23 45] 4 5 2 2]
        } -result {19 40}
    }
}

# -------------------------------------------------------------------------
testsuiteCleanup

# Local variables:
# mode: tcl
# indent-tabs-mode: nil
# End:
