# -*- tcl -*-
# -------------------------------------------------------------------------

source [file join \
            [file dirname [file join [pwd] [info script]]] \
            testutilities.tcl]

testsNeedTcl     8.5
testsNeedTcltest 2

support { useLocalFile synth.tcl }
support { useC [mainPath _test/lib]/crimp_core* crimp::core no }
testing { useC [mainPath _test/lib]/crimp*      crimp       no }

# -------------------------------------------------------------------------
## Geometry manipulation. Warp image through a projective transform.
# -------------------------------------------------------------------------

test crimp-warp-projective-0.0 {image warp projective, wrong\#args} -body {
    crimp warp
} -returnCodes error -result {wrong # args: should be "crimp warp subcommand ?argument ...?"}

test crimp-warp-projective-0.1 {image warp projective, wrong\#args} -body {
    crimp warp BOGUS
} -returnCodes error -result {unknown or ambiguous subcommand "BOGUS": must be field, or projective}

# -------------------------------------------------------------------------

test crimp-warp-projective-1.0 {image warp projective, wrong\#args, not enough} -body {
    crimp warp projective
} -returnCodes error -result {wrong # args: should be "::crimp::warp::projective image transform"}

test crimp-warp-projective-1.1 {image warp projective, wrong\#args, not enough} -body {
    crimp warp projective IMAGE
} -returnCodes error -result {wrong # args: should be "::crimp::warp::projective image transform"}

test crimp-warp-projective-1.2 {image warp projective, wrong\#args, too many} -body {
    crimp warp projective IMAGE T toomuch
} -returnCodes error -result {wrong # args: should be "::crimp::warp::projective image transform"}

test crimp-warp-projective-1.3 {image warp projective, invalid arguments, bad option} -body {
    crimp warp projective -bogus FOO
} -returnCodes error -result {Expected -interpolate, got "-bogus"}

test crimp-warp-projective-1.4 {image warp projective, invalid arguments, bad option} -body {
    crimp warp projective -interpolate FOO
} -returnCodes error -result {Expected one of nneighbour, bilinear, or bicubic, got "FOO"}

# 2 args: input, t
# option -interpolate: bilinear (default), bicubic, nneighbour
# supported inputs: grey8 grey16 grey32 rgb rgba hsv float
# TODO implementation: fpcomplex

# -------------------------------------------------------------------------

# -------------------------------------------------------------------------
## Handling of input location: Transformed coordinates of input location, to grid.

# TODO

# -------------------------------------------------------------------------
testsuiteCleanup

# Local variables:
# mode: tcl
# indent-tabs-mode: nil
# End:
