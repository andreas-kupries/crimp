# add.test -*- tcl -*-
# -------------------------------------------------------------------------

source [file join \
            [file dirname [file join [pwd] [info script]]] \
            testutilities.tcl]

testsNeedTcl     8.5
testsNeedTcltest 2

#support { useLocal synth.tcl }
support { useC [mainPath _test/lib]/crimp_core* crimp::core no }
testing { useC [mainPath _test/lib]/crimp*      crimp       no }

# -------------------------------------------------------------------------
## Creating of various types of blank images.
##
## XXX NOTE XXX This may be something for crimp::core instead of crimp.
# -------------------------------------------------------------------------

test crimp-blank-1.0 {Blank images, wrong\#args, not enough} -body {
    crimp blank
} -cleanup {
} -returnCodes error -result {wrong # args: should be "crimp blank type w h ..."}

test crimp-blank-1.1 {Blank images, wrong\#args, not enough} -body {
    crimp blank TYPE
} -cleanup {
} -returnCodes error -result {wrong # args: should be "crimp blank type w h ..."}

test crimp-blank-1.2 {Blank images, wrong\#args, not enough} -body {
    crimp blank TYPE W
} -cleanup {
} -returnCodes error -result {wrong # args: should be "crimp blank type w h ..."}

test crimp-blank-1.3 {Blank images, bogus image type} -body {
    crimp blank BOGUS W H
} -cleanup {
} -returnCodes error -result {Unable to create blank images of type "BOGUS"}



# TODO: grey16, grey32, float, rgb, rgba, hsv, fpcomplex

test crimp-blank-2.0 {Blank images, grey8, wrong\#args, not enough} -body {
    crimp blank grey8 W H
} -cleanup {
} -returnCodes error -result {wrong # args: should be "blank_grey8 w h value"}

test crimp-blank-2.1 {Blank images, grey8, wrong\#args, too many} -body {
    crimp blank grey8 W H VALUE toomuch
} -cleanup {
} -returnCodes error -result {wrong # args: should be "blank_grey8 w h value"}

test crimp-blank-2.2 {Blank images, grey8, bogus dimensions} -body {
    crimp blank grey8 W H VALUE
} -cleanup {
} -returnCodes error -result {expected integer but got "W"}

test crimp-blank-2.3 {Blank images, grey8, bogus dimensions} -body {
    crimp blank grey8 3 H VALUE
} -cleanup {
} -returnCodes error -result {expected integer but got "H"}

test crimp-blank-2.4 {Blank images, grey8, bogus dimensions} -body {
    crimp blank grey8 3 4 VALUE
} -cleanup {
} -returnCodes error -result {expected integer but got "VALUE"}

# TODO : Blank for empty image (WxH = 0)

test crimp-blank-2.5 {Blank images, grey8} -body {
    crimp write 2string tcl [crimp blank grey8 3 4 0]
} -result {{0 0 0} {0 0 0} {0 0 0} {0 0 0}}

test crimp-blank-2.6 {Blank images, grey8} -body {
    crimp write 2string tcl [crimp blank grey8 3 4 255]
} -result {{255 255 255} {255 255 255} {255 255 255} {255 255 255}}

test crimp-blank-2.7 {Blank images, grey8} -body {
    crimp write 2string tcl [crimp blank grey8 3 4 128]
} -result {{128 128 128} {128 128 128} {128 128 128} {128 128 128}}

test crimp-blank-2.8 {Blank images, grey8, wrap around} -body {
    crimp write 2string tcl [crimp blank grey8 3 4 256]
} -result {{0 0 0} {0 0 0} {0 0 0} {0 0 0}}

test crimp-blank-2.9 {Blank images, grey8, wrap around} -body {
    crimp write 2string tcl [crimp blank grey8 3 4 -1]
} -result {{255 255 255} {255 255 255} {255 255 255} {255 255 255}}


# -------------------------------------------------------------------------
testsuiteCleanup

# Local variables:
# mode: tcl
# indent-tabs-mode: nil
# End:
