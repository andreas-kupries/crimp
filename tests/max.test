# -*- tcl -*-
# -------------------------------------------------------------------------

source [file join \
            [file dirname [file join [pwd] [info script]]] \
            testutilities.tcl]

testsNeedTcl     8.5
testsNeedTcltest 2

support { useLocalFile synth.tcl }
support { useC [mainPath _test/lib]/crimp_core* crimp::core no }
testing { useC [mainPath _test/lib]/crimp*      crimp       no }

# -------------------------------------------------------------------------
## Point operation, maximum at each point.
# -------------------------------------------------------------------------

test crimp-max-1.0 {image max, wrong\#args, not enough} -body {
    crimp max
} -returnCodes error -result {wrong # args: should be "crimp max a b"}

test crimp-max-1.1 {image max, wrong\#args, too many} -body {
    crimp max A B toomuch
} -returnCodes error -result {wrong # args: should be "crimp max a b"}

# -------------------------------------------------------------------------
# MAX (arity 2, commutative)
# Supported combinations (commutations not mentioned):
#          | grey8 grey16 grey32 rgb rgba hsv float fpcomplex
# ---------+--------------------------------------------------
# grey8    | *
# grey16   |
# grey32   |
# rgb      | *                   *
# rgba     | *                   *   *
# hsv      |
# float    | *     *      *                    *
# fpcomplex|
# ---------+--------------------------------------------------
#
#  *--**-*-
#  ------*-
#  ------*-
#  *--**---
#  *--**---
#  --------
#  ***---*-
#  --------
#
# fpcomplex, hsv - Not supported at all
# grey8 works with most of the types.

test crimp-max-2.0 {image max, grey8, self} -body {
    crimp max [grey8] [grey8]
} -result [grey8]

# -------------------------------------------------------------------------
## Handling of input location and geometry: Union of inputs.

# -------------------------------------------------------------------------
testsuiteCleanup

# Local variables:
# mode: tcl
# indent-tabs-mode: nil
# End:
